<%- include('../../partials/head.ejs') %>

<div class="container my-3">
  <div class="row">
    <div class="col-md-6 offset-md-3">
        <h5>Search Result for - <%= searchTerm %> </h5>

        <% if(posts.length == 0) { %>
            <p class="text-center text-muted my-5">Nothing Found</p>
         <% } else{ %>
             <% for(let post of posts) { %>
                <div class="card card-body">
                    <a href="/explore/<%= post._id %>" style="color: #222">
                        <h5><%= post.title %></h5>
                        <p><%= truncate(post.body) %></p>
                    </a>
                </div>
             <% } %>
         <% } %>

      <% if( totalPage > 1){ %>
        <nav>
          <ul class="pagination">
            <li class="page-item <%= currentPage == 1 ? 'disabled' : '' %>"><a href="<%= `/search?term=${searchTerm}&page=${currentPage - 1}` %>" class="page-link">
              Previous
            </a></li>
            <% for (let i=1; i<=totalPage; i++){ %>
              <li class="page-item <%= currentPage == i ? 'active' : '' %>"><a href="<%= `/search?term=${searchTerm}&page=${i}` %>" class="page-link">
                <%= i %>
              </a></li>
            <% } %>
            <li class="page-item <%= currentPage == totalPage ? 'disabled' : '' %>"><a href="<%= `/search?term=${searchTerm}&page=${currentPage + 1}` %>" class="page-link">
              Next
            </a></li>
          </ul>
        </nav>
      <% } %>
    </div>
  </div>
</div>

<%- include('../../partials/footer.ejs') %>

<script src="/script/bookmarks.js"></script>

</body>

</html>